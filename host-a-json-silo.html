<!DOCTYPE HTML>
<html>
  <head>
    <title>Host a reelyActive JSON Silo</title>
    <link rel="stylesheet" href="style/main.css">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-49659454-2', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <header id="header">
      <a href="index.html"> <img src="images/diyActive.png"> </a>
    </header>
    <section id="content">
      <h1> Host a JSON Silo </h1>
      <p> Here we'll present how to host your very own JSON Silo identical to our public silo which you can check out at <a href="http://myjson.info" target="_blank">myjson.info</a>. </p>
      <img src="images/moreSilo.jpg">
      <p> Will Ferrell is right, and that's why we're showing you how to take complete control over your digital personae and share them as freely as you wish via your own hosted instance of <a href="https://www.npmjs.org/package/json-silo" target="_blank">json-silo</a>. </p>
      <h2> Installing Node.js </h2>
      <p> If you don't already have Node.js installed, be sure to do so first!  Installation is easy on all platforms. &nbsp; <a href="http://nodejs.org/download/" target="_blank">Let's do it &nbsp; ></a> </p>
      <h2> Installing json-silo </h2>
      <p> The easy way is via npm.  Create a new directory called myjson, then from that directory run: </p>
      <code> npm install json-silo </code>
      <p> Yeah, that's it, you're done! </p>
      <hr>
      <p> If you prefer to install from github, instead clone <a href="https://github.com/reelyactive/json-silo" target="_blank">json-silo</a>. </p>
      <h2> Running the silo </h2>
      <p> In the myjson directory you created above, open a new file called server.js and paste in the following code: </p>
      <code> var server = require('json-silo'); </code> <br>
      <code> var app = new server({ useCors: true }); </code>
      <p> To fire up the silo, simply run: </p>
      <code> node server.js </code>
      <h2> Did it work? </h2>
      <p> You should see the following line on the console: </p>
      <code> json-silo is listening on port 3002 </code> <br>
      <p> Now open your favourite web brower and browse to <a href="http://localhost:3002" target="_blank">localhost:3002</a> for the json-silo landing page.  It should look something like this: </p>
      <img src="images/jsonSiloLanding.png">
      <p> Great!  Now it's time to play around. </p>
      <h2> Create a digital persona </h2>
      <p> Fill in any or all of the info fields at left, and the JSON at right will update immediately thanks to the magic of client-side JavaScript (see <a href="http://reelyactive.github.io/jsonerator/" target="_blank">jsonerator</a>). Select the option to check-in at The Barn, and to self-destruct after 1 hour.  Then press the <i>Store your JSON in the silo</i> button.  You should see something like the following: </p>
      <img src="images/jsonSiloStored.png">
      <p> Click on the link to your JSON URL.  A new browser tab will open and the page will show your raw JSON hosted by the silo.  If you had entered "Barn Owl" as your name, it would look like this: </p>
      <code> { </code> <br>
      <code> &nbsp; person: { </code> <br>
      <code> &nbsp; &nbsp; firstName: "Barn", </code> <br>
      <code> &nbsp; &nbsp; lastName: "Owl" </code> <br>
      <code> &nbsp; } </code> <br>
      <code> } </code> <br>
      <p> At this point you're sharing your digital persona locally: only your computer can access that link.  But if we run the code in the cloud, the link would be accessible across the Internet.  We'll get there in a moment but first let's see what happened with our check-in at The Barn. </p>
      <h2> What's at The Barn? </h2>
      <p> Again, open your favourite web browser and this time browse to <a href="http://localhost:3002/at/test" target="_blank">localhost:3002/at/test</a> (test is the handle for The Barn).  You should see something like the following: </p>
      <code> { </code> <br>
      <code> &nbsp; _meta: { </code> <br>
      <code> &nbsp; &nbsp; message: "ok", </code> <br>
      <code> &nbsp; &nbsp; statusCode: 200 </code> <br>
      <code> &nbsp; }, </code> <br>
      <code> &nbsp; _links: { </code> <br>
      <code> &nbsp; &nbsp; self: { </code> <br>
      <code> &nbsp; &nbsp; &nbsp; href: "http://localhost:3002/at/test" </code> <br>
      <code> &nbsp; &nbsp; } </code> <br>
      <code> &nbsp; }, </code> <br>
      <code> &nbsp; devices: { </code> <br>
      <code> &nbsp; &nbsp; ipSBnuqEapXpf61j: { </code> <br>
       <code> &nbsp; &nbsp; &nbsp; url: "http://localhost:3002/id/ipSBnuqEapXpf61j", </code> <br>
      <code> &nbsp; &nbsp; } </code> <br>
      <code> &nbsp; &nbsp; test: { </code> <br>
       <code> &nbsp; &nbsp; &nbsp; url: "http://localhost:3002/id/test", </code> <br>
      <code> &nbsp; &nbsp; } </code> <br>
      <code> &nbsp; } </code> <br>
      <code> } </code> <br>
      <p> If you've read the <a href="make-a-smart-space.html" target="_blank">Make a Smart Space</a> tutorial, you'll notice that this is an identical API response format as that of hlc-server.  It's no coincidence!  You can use json-silo in place of hlc-server to allow for manual check-ins at locations that don't have hardware infrastructure. </p>
      <p> If you're keen to see the digital persona you entered floating around in a smartspaces bubble, follow the instructions from the <a href="make-a-smart-space.html" target="_blank">Make a Smart Space</a> tutorial, but when configuring smartspaces, instead set the API root to <i>http://localhost:3002/at/</i> so that it points to json-silo rather than hlc-server.  Then browse to <a href="http://localhost:3000/test" target="_blank">localhost:3000/test</a> to see The Barn Smart Space. </p>
      <h2> Take a break! </h2>
      <p> The last feature we need to test is whether the digital persona you entered will actually self-destruct after an hour.  Since you probably have the better part of that hour to kill, why not watch the <a href="http://vimeo.com/91715361" target="_blank">Saturday Night Live skit</a> that inspired the "More Silo" meme.  And then some more videos, you know, while you're waiting for that hour to pass.  Then, once it has, refresh the browser tab that had your JSON and you should see the following: </p>
      <code> { } </code>
      <p> It really did self-destruct! </p>
      <h2> What's next? </h2>
      <p> More to come soon, be sure to check back! </p>
    </section>
    <footer id="footer">
      <a href="index.html"> diyActive Home </a> &nbsp; | &nbsp;
      <a href="http://context.reelyactive.com"> &copy; reelyActive 2014 </a>
    </footer>
  </body>
</html>
